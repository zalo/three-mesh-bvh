import{M as w,f as T,V as M,a5 as D,W,S as F,F as G,D as H,A as I,T as B,i as R,n as k,P as j,d as A,b as V,y as O,j as q,v as K,a as U}from"./ExtendedTriangle-Chm2bbkR.js";import{S as J}from"./stats.min-GTpOrGrX.js";import{g as N}from"./lil-gui.module.min-Bc0DeA9g.js";import{O as Q}from"./OrbitControls-lzJCl7xY.js";import{T as X}from"./TransformControls-CXlfLtXQ.js";import{M as Y}from"./MeshBVHHelper-jLfel8l5.js";import{a as Z,c as _,d as $}from"./ExtensionUtilities-D80Yg0dh.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./MeshBVH-CPVAl5W3.js";w.prototype.raycast=Z;T.prototype.computeBoundsTree=_;T.prototype.disposeBoundsTree=$;const e={speed:1,visualizeBounds:!1,visualBoundsDepth:10,shape:"sphere",position:new M,rotation:new D,scale:new M(1,1,1)};let x,s,p,m,f,r,a,d,n={};function ee(){m=new W({antialias:!0}),m.setPixelRatio(window.devicePixelRatio),m.setSize(window.innerWidth,window.innerHeight),m.setClearColor(1251612,1),document.body.appendChild(m.domElement),s=new F,s.fog=new G(2503224/2,20,60);const l=new H(16777215,1.5);l.position.set(1,1,1),s.add(l),s.add(new I(16777215,1.2));const t=1,u=.4,o=400,c=100,P=new B(t,u,o,c),z=new R({color:16777215,side:k});d=new w(P,z),d.geometry.computeBoundsTree(),s.add(d),p=new j(75,window.innerWidth/window.innerHeight,.1,50),p.position.set(3,3,3),p.far=100,p.updateProjectionMatrix(),a=new X(p,m.domElement),s.add(a),f=new Q(p,m.domElement),x=new J,document.body.appendChild(x.dom);const g=new A({metalness:.1,transparent:!0,opacity:.75,premultipliedAlpha:!0});n.sphere=new w(new V(1,50,50),g),s.add(n.sphere),n.box=new w(new O(1,1,1),g),s.add(n.box),n.geometry=new w(new B(.5,.2,200,50),g),n.geometry.geometry.computeBoundsTree(),s.add(n.geometry);const i=new N;i.add(e,"speed").min(0).max(10),i.add(e,"visualizeBounds").onChange(()=>v()),i.add(e,"visualBoundsDepth").min(1).max(40).step(1).onChange(()=>v()),i.add(e,"shape",["sphere","box","geometry"]),i.add(a,"mode",["translate","rotate"]);const h=i.addFolder("position");h.add(e.position,"x").min(-5).max(5).step(.001),h.add(e.position,"y").min(-5).max(5).step(.001),h.add(e.position,"z").min(-5).max(5).step(.001),h.open();const y=i.addFolder("rotation");y.add(e.rotation,"x").min(-Math.PI).max(Math.PI).step(.001),y.add(e.rotation,"y").min(-Math.PI).max(Math.PI).step(.001),y.add(e.rotation,"z").min(-Math.PI).max(Math.PI).step(.001),y.open(),i.open(),a.addEventListener("change",function(){e.position.copy(n[e.shape].position),e.rotation.copy(n[e.shape].rotation),e.scale.copy(n[e.shape].scale),i.controllersRecursive().forEach(b=>b.updateDisplay())}),a.addEventListener("mouseDown",function(){f.enabled=!1}),a.addEventListener("mouseUp",function(){f.enabled=!0}),f.addEventListener("start",function(){a.enabled=!1}),f.addEventListener("end",function(){a.enabled=!0}),window.addEventListener("resize",function(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)},!1),window.addEventListener("keydown",function(b){switch(b.key){case"w":a.mode="translate";break;case"e":a.mode="rotate";break}i.controllersRecursive().forEach(L=>L.updateDisplay())})}function v(){r&&!e.visualizeBounds&&(s.remove(r),r=null),!r&&e.visualizeBounds&&(r=new Y(d),s.add(r)),r&&(r.depth=e.visualBoundsDepth)}let S=window.performance.now();function C(){const E=window.performance.now()-S;S=window.performance.now(),d.rotation.y+=e.speed*E*.001,d.updateMatrixWorld(),x.begin(),r&&r.update(),m.render(s,p),x.end();for(const o in n)n[o].visible=!1;const l=e.shape,t=n[l];t.visible=!0,t.position.copy(e.position),t.rotation.copy(e.rotation),t.scale.copy(e.scale);const u=new q().copy(d.matrixWorld).invert().multiply(t.matrixWorld);if(l==="sphere"){const o=new K(void 0,1);o.applyMatrix4(u);const c=d.geometry.boundsTree.intersectsSphere(o);t.material.color.set(c?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(c?.25:0)}else if(l==="box"){const o=new U;o.min.set(-.5,-.5,-.5),o.max.set(.5,.5,.5);const c=d.geometry.boundsTree.intersectsBox(o,u);t.material.color.set(c?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(c?.25:0)}else if(l==="geometry"){const o=d.geometry.boundsTree.intersectsGeometry(t.geometry,u);t.material.color.set(o?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(o?.25:0)}a.object!==t&&a.attach(t),requestAnimationFrame(C)}ee();v();C();
